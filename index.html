<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- SEO -->
    <title>FixCodeAI – Understand & Fix Coding Errors Instantly</title>
    <meta
      name="description"
      content="FixCodeAI helps developers and students debug programming errors instantly with AI. Supports Python, JavaScript, C++, Java, and more."
    />
    <meta
      name="keywords"
      content="AI bug explainer, fix code errors, debugging tool, programming help, Python error, JavaScript bug, AI assistant"
    />
    <meta name="author" content="FixCodeAI Team" />

    <!-- Open Graph -->
    <meta property="og:title" content="FixCodeAI – AI Bug Explainer" />
    <meta
      property="og:description"
      content="AI tool that explains programming errors clearly and instantly."
    />
    <meta property="og:type" content="website" />

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Fonts -->
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
      body {
        font-family: 'Inter', sans-serif;
      }
    </style>

    <!-- Include your app bundle (React bundle generated by Vite) -->
    <script type="module" crossorigin src="./assets/index-BbvkN0jy.js"></script>
    <link rel="stylesheet" href="./index.css" />
  </head>

  <body class="bg-gray-50 text-gray-900">
    <div id="root"></div>

    <!-- UI for AI Bug Explainer -->
    <div class="max-w-3xl mx-auto mt-12 p-6 bg-white shadow rounded">
      <h1 class="text-3xl font-bold text-blue-600 mb-4">
        Understand & Fix Code Errors Instantly
      </h1>

      <p class="text-gray-700 mb-6">
        Paste your buggy code and error message below. Our AI will analyze the
        problem and give you a clear explanation with a step-by-step solution.
      </p>

      <label class="font-semibold">Your Code</label>
      <textarea
        id="codeInput"
        rows="8"
        class="w-full border rounded p-3 mb-5"
        placeholder="Paste your code here..."
      ></textarea>

      <label class="font-semibold">Error Message</label>
      <textarea
        id="errorInput"
        rows="5"
        class="w-full border rounded p-3 mb-5"
        placeholder="Paste the error message here..."
      ></textarea>

      <button
        onclick="runFixAI()"
        class="bg-blue-600 hover:bg-blue-700 text-white px-5 py-2 rounded font-semibold"
      >
        Explain & Fix
      </button>

      <pre
        id="output"
        class="bg-gray-100 p-4 rounded mt-5 whitespace-pre-wrap text-gray-900"
      ></pre>
    </div>

    <!-- === AI API Script === -->
    <script>
      async function explainCode(code, errorMsg) {
        const apiKey =
          "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"; // ← API KEY أنت وضعته

        const payload = {
          model: "grok-2-latest",
          messages: [
            {
              role: "system",
              content:
                "You are an expert AI that explains coding errors clearly.",
            },
            {
              role: "user",
              content: `Here is the code:\n\n${code}\n\nHere is the error message:\n\n${errorMsg}\n\nExplain why the error happened and provide a corrected version.`,
            },
          ],
        };

        try {
          const response = await fetch(
            "https://openrouter.ai/api/v1/chat/completions",
            {
              method: "POST",
              headers: {
                Authorization: `Bearer ${apiKey}`,
                "Content-Type": "application/json",
              },
              body: JSON.stringify(payload),
            }
          );

          const data = await response.json();
          return (
            data.choices?.[0]?.message?.content ||
            "No explanation found — try again."
          );
        } catch (err) {
          return "❌ Failed to generate explanation. Check your API key or network.";
        }
      }

      window.runFixAI = async function () {
        const code = document.querySelector("#codeInput").value;
        const errorMsg = document.querySelector("#errorInput").value;
        const output = document.querySelector("#output");

        if (!code.trim() || !errorMsg.trim()) {
          output.textContent =
            "⚠️ Please paste both code and error message first.";
          return;
        }

        output.textContent = "⏳ Analyzing your code...";
        const result = await explainCode(code, errorMsg);

        output.textContent = result;
      };
    </script>
  </body>
</html>
